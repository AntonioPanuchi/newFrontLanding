# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Fetch API

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

Backend-–∫–æ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `fetch` –¥–ª—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º VPN-—Å–µ—Ä–≤–µ—Ä–∞–º, —á—Ç–æ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –≤ Node.js –¥–æ –≤–µ—Ä—Å–∏–∏ 18. –í `backend/package.json` –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Node –±—ã–ª–∞ –∑–∞—è–≤–ª–µ–Ω–∞ –∫–∞–∫ `>=16`, –æ–¥–Ω–∞–∫–æ –≤ Node 16 –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ `fetch` –Ω–µ—Ç.

**–°–∫—Ä—ã—Ç–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–ª–∞—Å—å Node.js 18+, —Ö–æ—Ç—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —É–∫–∞–∑—ã–≤–∞–ª–∞ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É Node.js 16+.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –≤–µ—Ä—Å–∏—è–º

**–î–æ:**
```json
"engines": {
  "node": ">=16.0.0",
  "npm": ">=8.0.0"
}
```

**–ü–æ—Å–ª–µ:**
```json
"engines": {
  "node": ">=18.0.0",
  "npm": ">=8.0.0"
}
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–∏—Ñ–∏–ª–ª–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω `node-fetch` –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–ª–∏—Ñ–∏–ª–ª:

```javascript
// --- –ü–û–õ–ò–§–ò–õ–õ –î–õ–Ø FETCH ---
const nodeVersion = process.version;
const majorVersion = parseInt(nodeVersion.slice(1).split('.')[0], 10);

if (majorVersion < 18) {
    // –î–ª—è Node.js < 18 –∏—Å–ø–æ–ª—å–∑—É–µ–º node-fetch –∫–∞–∫ –ø–æ–ª–∏—Ñ–∏–ª–ª
    const fetch = require('node-fetch');
    global.fetch = fetch;
    console.log(`Node.js ${nodeVersion} detected, using node-fetch polyfill for fetch API`);
} else {
    console.log(`Node.js ${nodeVersion} detected, using native fetch API`);
}
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```json
"dependencies": {
  "node-fetch": "^3.3.2"
}
```

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
```bash
./check-node-version.sh
```

**–í—ã–≤–æ–¥ –¥–ª—è Node.js >= 18:**
```
[INFO] –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –≤–µ—Ä—Å–∏—è Node.js: v18.17.0
[SUCCESS] Node.js –≤–µ—Ä—Å–∏–∏ v18.17.0 –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π fetch API
```

**–í—ã–≤–æ–¥ –¥–ª—è Node.js 16-17:**
```
[INFO] –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –≤–µ—Ä—Å–∏—è Node.js: v16.20.0
[WARNING] Node.js –≤–µ—Ä—Å–∏–∏ v16.20.0 –Ω–∏–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–π (18.x)
[INFO] –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø–æ–ª–∏—Ñ–∏–ª–ª node-fetch –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
[SUCCESS] –ü–æ–ª–∏—Ñ–∏–ª–ª node-fetch —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- `node test-fetch.js` ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ fetch API
- `node test-polyfill-logic.js` ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–ª–∏—Ñ–∏–ª–ª–∞

## üìä –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

| Node.js –≤–µ—Ä—Å–∏—è | Fetch API | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |
|----------------|-----------|--------|-------------------|
| >= 18          | –ù–∞—Ç–∏–≤–Ω—ã–π  | ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | üü¢ –û—Ç–ª–∏—á–Ω–∞—è |
| 16-17          | –ü–æ–ª–∏—Ñ–∏–ª–ª  | ‚ö†Ô∏è –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | üü° –•–æ—Ä–æ—à–∞—è |
| < 16           | –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω| ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | üî¥ –ù–µ—Ç |

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [COMPATIBILITY.md](./COMPATIBILITY.md) ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- –û–±–Ω–æ–≤–ª–µ–Ω [README.md](./README.md) —Å –Ω–æ–≤—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
`deploy.sh` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Ä—Å–∏—é Node.js –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ª–∏—Ñ–∏–ª–ª–∞.

### CI/CD —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
GitHub Actions workflow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Node.js 18, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **–ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å Node.js 16+ (—Å –ø–æ–ª–∏—Ñ–∏–ª–ª–æ–º)
- ‚úÖ **–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –Ω–∞ Node.js 18+
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ª–∏—Ñ–∏–ª–ª–∞
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Node.js 18+ –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**: Node.js 16+ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å –ø–æ–ª–∏—Ñ–∏–ª–ª–æ–º
3. **–î–ª—è CI/CD**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Node.js 18+
4. **–î–ª—è –¥–µ–ø–ª–æ—è**: –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./check-node-version.sh` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ 