# ROX VPN API Reference

Этот документ описывает доступные маршруты backend сервера и примерные ответы.

## Основные эндпоинты

### GET `/api/server-statuses`
Возвращает текущие статусы VPN‑серверов, сохранённые в кэше или полученные напрямую.

Ответ:
```json
{
  "servers": [
    {
      "name": "Germany",
      "status": "online",
      "ping": 45,
      "uptime": "5d 12h",
      "users": 1250
    }
  ],
  "lastUpdate": "2024-01-15T10:30:00Z"
}
```

### POST `/api/refresh-cache`
Принудительно обновляет кэш статусов серверов. Возвращает свежие данные.

Ответ при успехе:
```json
{
  "success": true,
  "message": "Cache refreshed successfully",
  "data": [ /* список серверов */ ]
}
```

### GET `/api/health`
Проверка состояния сервера и кэша.

Ответ:
```json
{
  "status": "OK",
  "uptime": 123.45,
  "timestamp": "2024-01-15T10:30:00Z",
  "cache": {
    "servers": 3,
    "lastUpdate": "2024-01-15T10:30:00Z",
    "cacheAge": 1000
  }
}
```

### POST `/api/log`
Позволяет фронтенду отправлять сообщения в систему логирования.
Тело запроса:
```json
{ "level": "info", "message": "Hello", "meta": {}} 
```
Ответ: `204 No Content`.

## Примечания
- Все маршруты префиксируются `/api` в `server.js`.
- Сервис использует кэш для ускорения ответов. Время жизни кэша регулируется переменными окружения.
