# ROX VPN API – Справочник эндпоинтов

Этот документ описывает маршруты backend сервера и примерные ответы.

## Основные эндпоинты

### GET `/api/server-statuses`
Возвращает актуальные статусы VPN-серверов.

Пример ответа:
```json
{
  "servers": [
    {
      "name": "Germany",
      "status": "online",
      "uptime": "5d 12h 30m",
      "ping": 45,
      "users": 1250,
      "lastUpdate": "2024-01-15T10:30:00Z"
    }
  ],
  "lastUpdate": "2024-01-15T10:30:00Z"
}
```

### POST `/api/refresh-cache`
Принудительно обновляет кэш статусов серверов.

Ответ при успехе:
```json
{
  "success": true,
  "message": "Cache refreshed successfully",
  "data": [ /* актуальные статусы */ ]
}
```

### GET `/api/health`
Проверка состояния сервера и кэша.

```json
{
  "status": "OK",
  "uptime": 123.45,
  "timestamp": "2024-01-15T10:40:00Z",
  "version": "1.0.0",
  "cache": {
    "servers": 3,
    "lastUpdate": "2024-01-15T10:30:00Z",
    "cacheAge": 60000
  },
  "memory": {
    "used": 50,
    "total": 120
  }
}
```

### POST `/api/log`
Используется фронтендом для отправки логов на сервер.

Тело запроса:
```json
{ "level": "info", "message": "Hello", "meta": {} }
```
Ответ: `204 No Content`.

Эндпоинты доступны по умолчанию на `http://localhost:3000`. Порт и другие параметры можно настроить через [переменные окружения](ENVIRONMENT.md).

## Примечания
- Все маршруты префиксируются `/api` в `server.js`.
- Сервис использует кэш для ускорения ответов. Время жизни кэша регулируется переменными окружения.
